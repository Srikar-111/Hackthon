<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Productivity Toolkit</title>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
/>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  :root {
    --primary: #6c5ce7;
    --secondary: #a29bfe;
    --accent: #fd79a8;
    --light: #f8f9fa;
    --dark: #2d3436;
  }

  body {
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(45deg, #8b5cf6, #ec4899, #2dd4bf, #8b5cf6);
    background-size: 400% 400%;
    animation: gradientBG 12s ease-in-out infinite;
    min-height: 100vh;
    color: #333;
    overflow-x: hidden;
  }

  @keyframes gradientBG {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  .tab-button {
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    border-radius: 8px 8px 0 0;
    padding: 0.75rem 1.5rem;
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
  }

  .tab-button:hover:not(.active) {
    background: rgba(255, 255, 255, 0.2);
  }

  .tab-button.active {
    color: white;
    background: rgba(108, 92, 231, 0.8);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
  }

  .tab-button.active::after {
    content: "";
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: var(--primary);
    border-radius: 3px;
  }

  .tab-content {
    animation: fadeInTab 0.3s ease forwards;
  }

  @keyframes fadeInTab {
    from {
      opacity: 0;
      transform: translateY(10px);
      display: none;
    }
    to {
      opacity: 1;
      transform: translateY(0);
      display: block;
    }
  }

  .card {
    background: rgba(255, 255, 255, 0.95);
    border-radius: 16px;
    box-shadow: 
      0 10px 20px rgba(0, 0, 0, 0.15),
      0 6px 6px rgba(0, 0, 0, 0.1),
      0 0 0 1px rgba(0, 0, 0, 0.05);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .card:hover {
    transform: translateY(-5px);
    box-shadow: 
      0 25px 50px rgba(0, 0, 0, 0.3),
      0 15px 15px rgba(0, 0, 0, 0.2),
      0 0 0 2px rgba(255, 255, 255, 0.2);
    filter: brightness(1.05);
  }

  .task-item {
    animation: fadeIn 0.5s ease-out;
  }

  .task-item.completed {
    text-decoration: line-through;
    opacity: 0.7;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  input[type="checkbox"] {
    appearance: none;
    width: 20px;
    height: 20px;
    border: 2px solid var(--primary);
    border-radius: 4px;
    cursor: pointer;
    position: relative;
    transition: all 0.3s ease;
  }

  input[type="checkbox"]:checked {
    background: var(--primary);
    border-color: var(--primary);
  }

  input[type="checkbox"]:checked::after {
    content: "\f00c";
    font-family: "Font Awesome 6 Free";
    font-weight: 900;
    color: white;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 12px;
  }

  .stopwatch-circle {
    width: 240px;
    height: 240px;
    border: 6px solid var(--primary);
    background: radial-gradient(
      circle,
      rgba(108, 92, 231, 0.1) 0%,
      rgba(255, 255, 255, 0.1) 70%
    );
    box-shadow: 
      inset 0 0 30px rgba(108, 92, 231, 0.3),
      0 15px 30px rgba(108, 92, 231, 0.3),
      0 0 15px rgba(108, 92, 231, 0.4);
    animation: pulse 2s infinite;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 3rem;
    color: var(--primary);
    user-select: none;
  }

  @keyframes pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(108, 92, 231, 0.4);
      transform: scale(1);
    }
    50% {
      box-shadow: 0 0 0 15px rgba(108, 92, 231, 0.2);
      transform: scale(1.05);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(108, 92, 231, 0);
      transform: scale(1);
    }
  }

  input[type="range"] {
    -webkit-appearance: none;
    width: 100%;
    height: 10px;
    background: #e0e0e0;
    border-radius: 5px;
    outline: none;
    cursor: pointer;
    transition: background 0.3s ease;
  }

  input[type="range"]:focus {
    outline: none;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 25px;
    height: 25px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(108, 92, 231, 0.7);
    transition: background 0.3s ease;
  }

  input[type="range"]::-moz-range-thumb {
    width: 25px;
    height: 25px;
    background: var(--primary);
    border-radius: 50%;
    cursor: pointer;
    box-shadow: 0 0 5px rgba(108, 92, 231, 0.7);
    transition: background 0.3s ease;
  }

  .bmi-indicator {
    transition: width 0.5s ease, background-color 0.5s ease;
    height: 100%;
    border-radius: 9999px;
  }

  .hero-image {
    background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    border-radius: 15px;
    height: 180px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  button.text-red-500:hover {
    color: #c53030;
  }

  @media (max-width: 640px) {
    .flex-col.md\\:flex-row {
      flex-direction: column;
    }
  }
</style>
</head>
<body class="min-h-screen flex items-center justify-center py-8 px-4">
  <div class="w-full max-w-4xl mx-auto">
    <div class="text-center mb-10">
      <h1 class="text-4xl font-bold text-gray-800 mb-2">Productivity Toolkit</h1>
      <p class="text-lg text-gray-600">Your all-in-one productivity dashboard</p>
    </div>

    <div class="card p-2 mb-6">
      <div
        class="flex space-x-4 border-b border-gray-200"
        role="tablist"
        aria-label="Productivity Toolkit Tabs"
      >
        <button
          onclick="switchTab('tasks')"
          class="tab-button py-3 px-6 text-lg font-medium active"
          id="tasks-tab"
          role="tab"
          aria-selected="true"
          aria-controls="tasks-content"
          tabindex="0"
        >
          <i class="fas fa-tasks mr-2"></i>Tasks
        </button>
        <button
          onclick="switchTab('stopwatch')"
          class="tab-button py-3 px-6 text-lg font-medium"
          id="stopwatch-tab"
          role="tab"
          aria-selected="false"
          aria-controls="stopwatch-content"
          tabindex="-1"
        >
          <i class="fas fa-stopwatch mr-2"></i>Stopwatch
        </button>
        <button
          onclick="switchTab('bmi')"
          class="tab-button py-3 px-6 text-lg font-medium"
          id="bmi-tab"
          role="tab"
          aria-selected="false"
          aria-controls="bmi-content"
          tabindex="-1"
        >
          <i class="fas fa-heartbeat mr-2"></i>BMI Calculator
        </button>
      </div>

      <div
        id="tasks-content"
        class="tab-content p-6"
        role="tabpanel"
        aria-labelledby="tasks-tab"
      >
        <div class="flex mb-6">
          <input
            type="text"
            id="new-task"
            placeholder="Enter a new task..."
            class="flex-grow px-4 py-2 border rounded-l-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-gray-800"
            aria-label="New task"
          />
          <button
            onclick="addTask()"
            class="bg-gradient-to-r from-purple-600 to-blue-500 hover:from-purple-700 hover:to-blue-600 text-white px-6 py-2 rounded-r-lg transition-all duration-300 transform hover:scale-105 shadow-md hover:shadow-lg"
            aria-label="Add task"
          >
            <i class="fas fa-plus"></i> Add
          </button>
        </div>

        <div id="task-list" class="space-y-3" aria-live="polite" aria-relevant="additions removals"></div>
      </div>

      <div
        id="stopwatch-content"
        class="tab-content p-6 hidden"
        role="tabpanel"
        aria-labelledby="stopwatch-tab"
      >
        <div class="flex flex-col items-center">
          <div class="stopwatch-circle rounded-full mb-8" aria-live="polite" aria-atomic="true">
            <span id="stopwatch-display" class="select-none">00:00:00</span>
          </div>

          <div class="flex space-x-4 mb-4">
            <button
              id="start-stopwatch"
              onclick="startStopwatch()"
              class="bg-purple-600 hover:bg-purple-700 text-white px-6 py-3 rounded-lg transition-colors"
              aria-label="Start stopwatch"
            >
              <i class="fas fa-play mr-2"></i>Start
            </button>
            <button
              id="stop-stopwatch"
              onclick="stopStopwatch()"
              class="bg-gray-600 hover:bg-gray-700 text-white px-6 py-3 rounded-lg transition-colors hidden"
              aria-label="Pause stopwatch"
            >
              <i class="fas fa-pause mr-2"></i>Pause
            </button>
            <button
              onclick="resetStopwatch()"
              class="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg transition-colors"
              aria-label="Reset stopwatch"
            >
              <i class="fas fa-rotate-left mr-2"></i>Reset
            </button>
            <button
              id="lap-stopwatch"
              onclick="lapStopwatch()"
              class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg transition-colors"
              aria-label="Record lap time"
              disabled
            >
              <i class="fas fa-flag-checkered mr-2"></i>Lap
            </button>
          </div>

          <div
            id="laps-container"
            class="max-h-48 overflow-y-auto w-full bg-gray-50 rounded-lg p-4 shadow-inner"
            aria-live="polite"
            aria-label="Lap times"
          >
            <ul id="laps" class="list-decimal pl-6 text-gray-700"></ul>
          </div>
        </div>
      </div>

      <div
        id="bmi-content"
        class="tab-content p-6 hidden"
        role="tabpanel"
        aria-labelledby="bmi-tab"
      >
        <div class="flex flex-col md:flex-row space-y-6 md:space-y-0 md:space-x-12 items-center">
          <div class="w-full md:w-1/2">
            <label for="height" class="block mb-2 font-semibold text-gray-700"
              >Height (cm): <span id="height-value">170</span></label
            >
            <input
              type="range"
              id="height"
              min="100"
              max="250"
              value="170"
              aria-valuemin="100"
              aria-valuemax="250"
              aria-valuenow="170"
              aria-label="Height in centimeters"
              oninput="updateBMI()"
            />
            <label for="weight" class="block mt-6 mb-2 font-semibold text-gray-700"
              >Weight (kg): <span id="weight-value">65</span></label
            >
            <input
              type="range"
              id="weight"
              min="30"
              max="200"
              value="65"
              aria-valuemin="30"
              aria-valuemax="200"
              aria-valuenow="65"
              aria-label="Weight in kilograms"
              oninput="updateBMI()"
            />
          </div>

          <div class="w-full md:w-1/2 space-y-4">
            <div
              class="relative w-full h-6 bg-gray-300 rounded-full overflow-hidden"
              aria-label="BMI visual indicator"
            >
              <div id="bmi-indicator" class="bmi-indicator h-full w-0"></div>
            </div>

            <p
              id="bmi-result"
              class="text-center text-xl font-semibold text-gray-800"
              aria-live="polite"
            >
              BMI: <span id="bmi-value">22.49</span> - <span id="bmi-category"
                >Normal weight</span
              >
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
  // Tab switching logic
  function switchTab(tab) {
    const tabs = ["tasks", "stopwatch", "bmi"];
    tabs.forEach((t) => {
      const btn = document.getElementById(t + "-tab");
      const content = document.getElementById(t + "-content");
      const selected = t === tab;
      btn.classList.toggle("active", selected);
      btn.setAttribute("aria-selected", selected);
      btn.tabIndex = selected ? 0 : -1;
      if (selected) {
        content.classList.remove("hidden");
        content.classList.add("tab-content");
      } else {
        content.classList.add("hidden");
        content.classList.remove("tab-content");
      }
    });
  }

  // Tasks functionality
  const taskList = document.getElementById("task-list");
  const newTaskInput = document.getElementById("new-task");

  function loadTasks() {
    const tasks = JSON.parse(localStorage.getItem("tasks") || "[]");
    taskList.innerHTML = "";
    tasks.forEach(({ id, text, completed }) => {
      addTaskElement(id, text, completed);
    });
  }

  function saveTasks() {
    const tasks = Array.from(taskList.querySelectorAll(".task-item")).map((item) => {
      const checkbox = item.querySelector("input[type='checkbox']");
      const textSpan = item.querySelector(".task-text");
      return {
        id: item.dataset.id,
        text: textSpan.textContent.trim(),
        completed: checkbox.checked,
      };
    });
    localStorage.setItem("tasks", JSON.stringify(tasks));
  }

  function addTaskElement(id, text, completed = false) {
    const taskItem = document.createElement("div");
    taskItem.className =
      "task-item flex items-center bg-purple-50 p-3 rounded shadow-sm" +
      (completed ? " completed" : "");
    taskItem.dataset.id = id;

    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.checked = completed;
    checkbox.setAttribute("aria-label", `Mark task "${text}" as completed`);
    checkbox.addEventListener("change", () => {
      taskItem.classList.toggle("completed", checkbox.checked);
      saveTasks();
    });

    const textSpan = document.createElement("span");
    textSpan.className = "task-text flex-grow ml-3";
    textSpan.textContent = text;

    const deleteBtn = document.createElement("button");
    deleteBtn.innerHTML = '<i class="fas fa-trash-alt"></i>';
    deleteBtn.className = "text-red-500 hover:text-red-700 focus:outline-none ml-4";
    deleteBtn.setAttribute("aria-label", `Delete task "${text}"`);
    deleteBtn.addEventListener("click", () => {
      try {
        if (confirm(`Are you sure you want to delete this task: "${text}"?`)) {
          taskItem.remove();
          saveTasks();
        }
      } catch (error) {
        console.error("Error deleting task:", error);
      }
    });

    taskItem.appendChild(checkbox);
    taskItem.appendChild(textSpan);
    taskItem.appendChild(deleteBtn);
    taskList.appendChild(taskItem);
  }

  function addTask() {
    const text = newTaskInput.value.trim();
    if (!text) return;
    const id = Date.now().toString();
    addTaskElement(id, text, false);
    newTaskInput.value = "";
    saveTasks();
    newTaskInput.focus();
  }

  newTaskInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
      addTask();
      e.preventDefault();
    }
  });

  // Stopwatch functionality
  let stopwatchInterval;
  let stopwatchTime = 0;
  let stopwatchRunning = false;
  let laps = [];

  const display = document.getElementById("stopwatch-display");
  const startBtn = document.getElementById("start-stopwatch");
  const stopBtn = document.getElementById("stop-stopwatch");
  const lapBtn = document.getElementById("lap-stopwatch");
  const lapsContainer = document.getElementById("laps");
  const lapsDiv = document.getElementById("laps-container");

  function formatTime(ms) {
    const totalSeconds = Math.floor(ms / 1000);
    const hours = Math.floor(totalSeconds / 3600);
    const minutes = Math.floor((totalSeconds % 3600) / 60);
    const seconds = totalSeconds % 60;
    return (
      String(hours).padStart(2, "0") +
      ":" +
      String(minutes).padStart(2, "0") +
      ":" +
      String(seconds).padStart(2, "0")
    );
  }

  function updateStopwatch() {
    stopwatchTime += 1000;
    display.textContent = formatTime(stopwatchTime);
    saveStopwatchState();
  }

  function startStopwatch() {
    if (stopwatchRunning) return;
    stopwatchRunning = true;
    startBtn.classList.add("hidden");
    stopBtn.classList.remove("hidden");
    lapBtn.disabled = false;
    stopwatchInterval = setInterval(updateStopwatch, 1000);
  }

  function stopStopwatch() {
    if (!stopwatchRunning) return;
    stopwatchRunning = false;
    clearInterval(stopwatchInterval);
    startBtn.classList.remove("hidden");
    stopBtn.classList.add("hidden");
    lapBtn.disabled = true;
  }

  function resetStopwatch() {
    if (
      stopwatchRunning &&
      !confirm("Stopwatch is running. Are you sure you want to reset?")
    ) {
      return;
    }
    stopStopwatch();
    stopwatchTime = 0;
    display.textContent = "00:00:00";
    laps = [];
    renderLaps();
    saveStopwatchState();
  }

  function lapStopwatch() {
    if (!stopwatchRunning) return;
    laps.push(stopwatchTime);
    renderLaps();
    saveStopwatchState();
  }

  function renderLaps() {
    lapsContainer.innerHTML = "";
    laps.forEach((lap, idx) => {
      const li = document.createElement("li");
      li.textContent = `Lap ${idx + 1}: ${formatTime(lap)}`;
      lapsContainer.appendChild(li);
    });
  }

  function saveStopwatchState() {
    localStorage.setItem(
      "stopwatch",
      JSON.stringify({
        time: stopwatchTime,
        running: stopwatchRunning,
        laps: laps,
      })
    );
  }

  function loadStopwatchState() {
    const state = JSON.parse(localStorage.getItem("stopwatch"));
    if (state) {
      stopwatchTime = state.time || 0;
      stopwatchRunning = state.running || false;
      laps = state.laps || [];
      display.textContent = formatTime(stopwatchTime);
      renderLaps();
      if (stopwatchRunning) {
        startStopwatch();
      }
    }
  }

  // BMI Calculator
  const heightInput = document.getElementById("height");
  const weightInput = document.getElementById("weight");
  const heightValue = document.getElementById("height-value");
  const weightValue = document.getElementById("weight-value");
  const bmiValue = document.getElementById("bmi-value");
  const bmiCategory = document.getElementById("bmi-category");
  const bmiIndicator = document.getElementById("bmi-indicator");

  function calculateBMI(heightCm, weightKg) {
    const heightM = heightCm / 100;
    return weightKg / (heightM * heightM);
  }

  function getBMICategory(bmi) {
    if (bmi < 18.5) return "Underweight";
    if (bmi < 24.9) return "Normal weight";
    if (bmi < 29.9) return "Overweight";
    return "Obese";
  }

  function getBMIColor(bmi) {
    if (bmi < 18.5) return "#74b9ff"; // Blueish
    if (bmi < 24.9) return "#55efc4"; // Greenish
    if (bmi < 29.9) return "#ffeaa7"; // Yellowish
    return "#fab1a0"; // Reddish
  }

  function updateBMI() {
    const height = parseInt(heightInput.value);
    const weight = parseInt(weightInput.value);

    heightValue.textContent = height;
    weightValue.textContent = weight;

    const bmi = calculateBMI(height, weight);
    const roundedBMI = bmi.toFixed(2);
    const category = getBMICategory(bmi);
    const color = getBMIColor(bmi);

    bmiValue.textContent = roundedBMI;
    bmiCategory.textContent = category;

    const widthPercent = Math.min((bmi / 40) * 100, 100);
    bmiIndicator.style.width = widthPercent + "%";
    bmiIndicator.style.backgroundColor = color;

    heightInput.setAttribute("aria-valuenow", height);
    weightInput.setAttribute("aria-valuenow", weight);
  }

  window.onload = () => {
    loadTasks();
    loadStopwatchState();
    updateBMI();
  };
</script>
</body>
</html>
